(this.webpackJsonpinfovis2=this.webpackJsonpinfovis2||[]).push([[0],{236:function(t,e,r){},237:function(t,e,r){},272:function(t,e,r){"use strict";r.r(e);var a=r(2),n=r(1),c=r.n(n),i=r(37),s=r.n(i),o=r(39),l=(r(236),r(55)),u=r(8),d=(r(237),r(9)),j=r.p+"static/media/diver.104dad2c.png",h=r(53),b=r.n(h),f=function(t){return Object(a.jsx)("div",{className:"App",children:Object(a.jsxs)("header",{className:"App-header",children:[Object(a.jsx)("img",{src:j,className:"App-logo",alt:"logo"}),Object(a.jsxs)("p",{children:["San Francisco Bay ",Object(a.jsx)("code",{children:"diving"})," decision support system."]}),t.loading?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("small",{children:"Please wait while the CSV-File is parsed..."}),Object(a.jsx)("br",{}),Object(a.jsx)(b.a,{css:"margin: 0 auto;"})]}):Object(a.jsx)(o.b,{to:"/welcome",className:"btn btn-danger",children:"Enter Page and see visualizations"}),Object(a.jsxs)("div",{className:"attribution",children:["Icons made by ",Object(a.jsx)("a",{href:"https://www.flaticon.com/authors/freepik",title:"Freepik",children:"Freepik"})," from ",Object(a.jsx)("a",{href:"https://www.flaticon.com/",title:"Flaticon",children:"www.flaticon.com"})]})]})})},O=r(14),m=0,p=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"id";return m++,"".concat(t).concat(m)},x=r(40),v=r.n(x),g=r(275),S=r(276),y=r(277),N=r(278),w=r(279),F=r(280),D=r(281),T=r(287),k=r(288),M=r(289),E=r(282),C=function(t){var e=Object(n.useState)(!1),r=Object(u.a)(e,2),c=r[0],i=r[1];return Object(a.jsxs)("div",{children:[Object(a.jsxs)(g.a,{color:"light",light:!0,expand:"md",children:[Object(a.jsx)(S.a,{href:"#/",children:"Scuba Diving Support"}),Object(a.jsx)(y.a,{onClick:function(){return i(!c)}}),Object(a.jsxs)(N.a,{isOpen:c,navbar:!0,children:[Object(a.jsxs)(w.a,{className:"mr-auto",navbar:!0,children:[Object(a.jsx)(F.a,{children:Object(a.jsx)(D.a,{href:"#/welcome",children:"Home"})}),Object(a.jsx)(F.a,{children:Object(a.jsx)(D.a,{href:"#/dt",children:"Depth-Temperature"})}),Object(a.jsx)(F.a,{children:Object(a.jsx)(D.a,{href:"#/map",children:"Diving-Spot Guide"})})]}),Object(a.jsxs)(T.a,{navbar:!0,children:[Object(a.jsx)(k.a,{nav:!0,children:"Group 14"}),Object(a.jsxs)(M.a,{right:!0,children:[Object(a.jsx)(E.a,{children:Object(a.jsx)("strong",{children:"Members"})}),Object(a.jsx)(E.a,{divider:!0}),Object(a.jsx)(E.a,{children:"Simone Andreetto"}),Object(a.jsx)(E.a,{children:"Christoph G\xf6tz"}),Object(a.jsx)(E.a,{children:"Felix Winterleitner"})]})]})]})]}),Object(a.jsx)("div",{className:"container",children:t.children})]})},B=function(t){return Object(a.jsxs)("div",{children:[Object(a.jsx)("h1",{children:"Welcome to the Diving Support System Visualization Page"}),Object(a.jsx)("p",{children:"Here, our sample visualizations for the use case of scuba diving in the San Francisco Bay area are presented."}),Object(a.jsxs)("p",{children:["The dataset in use can be obtained from: ",Object(a.jsx)("a",{href:"infovis2/SFBay.csv",children:"SFBay.csv"})]}),Object(a.jsxs)("p",{children:["It consists of ",t.data.length," data entries recorded from ",t.data[0].TimeStamp.toLocaleDateString("de-DE")," to ",t.data[t.data.length-1].TimeStamp.toLocaleDateString("de-DE")," in the San Francisco Bay area."]})]})},A=r(31),z=r.n(A),L=r(18),G=r(10),I=r(38),P=function(t){var e=Object(n.useState)(p()),r=Object(u.a)(e,1)[0],c=Object(n.useState)(null),i=Object(u.a)(c,2),s=(i[0],i[1]);return Object(n.useEffect)((function(){document.getElementById(r).innerHTML="";var e=function(t){var e,r=t.reduce((function(t,e){return t.set(e["Station.Number"],[].concat(Object(L.a)(t.get(e["Station.Number"])||[]),[e]))}),new Map),a=[],n=[],c=Object(G.a)(r.keys());try{for(c.s();!(e=c.n()).done;){var i,s=e.value,o={"Station.Number":s,Measures:[]},l=r.get(s).reduce((function(t,e){return t.set(e.Depth,[].concat(Object(L.a)(t.get(e.Depth)||[]),[e]))}),new Map),u=Object(G.a)(l.keys());try{for(u.s();!(i=u.n()).done;){var d=i.value,j=l.get(d),h=(j.reduce((function(t,e){return t+e.Temperature}),0)/j.length).toFixed(1);o.Measures.push({Depth:d,Temperature:h}),n.push({"Station.Number":s,Depth:d,Temperature:h})}}catch(b){u.e(b)}finally{u.f()}o.Measures.sort((function(t,e){return t.Depth>e.Depth?-1:1})),a.push(o)}}catch(b){c.e(b)}finally{c.f()}return a.sort((function(t,e){return t["Station.Number"]>e["Station.Number"]?1:-1})),a}(t.data),a=e.map((function(t){return t.Measures})).reduce((function(t,e){return t.concat(e)}),[]).map((function(t){return t.Depth})).reduce((function(t,e){return t>e?t:e}),0);console.log("Data",e);var n=40,c=20,i=20,o=40,l=t.width-o-c,u=t.height-n-i,d=O.j("#".concat(r)).append("svg").attr("width",l+o+c).attr("height",u+n+i).append("g").attr("transform","translate("+o+","+n+")"),j=O.i(O.d).domain([30,0]),h=O.g().domain(e.map((function(t){return t["Station.Number"]}))).range([0,l]).padding([.3]);d.append("g").call(O.c(h).tickSizeOuter(0)),d.append("text").attr("class","x label").attr("text-anchor","end").attr("x",l).attr("y",-20).text("Station Number");var b=O.h().domain([a,0]).range([u,0]);d.append("g").call(O.b(b)),d.append("text").attr("class","y label").attr("text-anchor","end").attr("x",50-u).attr("y",-35).attr("dy",".75em").attr("transform","rotate(-90)").text("Depth");var f=Object(I.a)().attr("class","d3-tip").html((function(t){var e=t.toElement.__data__;return e.Depth+"m: "+e.Temperature+"\xb0C"})).offset([20,0]);d.call(f),d.append("g").selectAll("g").data(e).enter().append("g").attr("transform",(function(t,e){return"translate("+h(t["Station.Number"])+", 0)"})).selectAll("rect").data((function(t){return t.Measures})).enter().append("rect").attr("y",1).attr("height",(function(t){return b(t.Depth)})).attr("width",h.bandwidth()).style("fill",(function(t){return j(t.Temperature)})).on("mouseover",f.show).on("mouseout",f.hide),s(d)}),[t.data]),Object(a.jsxs)("div",{children:[Object(a.jsx)("h3",{children:"Temperature averages by station and depth"}),Object(a.jsx)("div",{id:r})]})};P.defaultProps={width:700,height:500};var R=function(t){var e=Object(n.useState)(p()),r=Object(u.a)(e,1)[0],c=Object(n.useState)(null),i=Object(u.a)(c,2),s=(i[0],i[1]);return Object(n.useEffect)((function(){document.getElementById(r).innerHTML="";var e=t.data,a=40,n=20,c=20,i=40,o=t.width-i-n,l=t.height-a-c,u=O.j("#".concat(r)).append("svg").attr("width",o+i+n).attr("height",l+a+c).append("g").attr("transform","translate("+i+","+a+")"),d=O.g().domain(e.map((function(t){return t.TimeStamp}))).range([0,o]).padding([.3]);u.append("g").attr("transform","translate(0,"+l+")").call(O.a(d));var j=O.h().domain([0,O.f(e,(function(t){return+t.Temperature}))]).range([l,0]);u.append("g").call(O.b(j)),u.append("text").attr("class","y label").attr("text-anchor","center").attr("x",50-l).attr("y",-35).attr("dy",".75em").attr("transform","rotate(-90)").text("Temperature"),u.append("path").datum(e).attr("fill","none").attr("stroke","steelblue").attr("stroke-width",1.5).attr("d",O.e().x((function(t){return d(t.TimeStamp)})).y((function(t){return j(t.Temperature)}))),s(u)}),[t.data]),Object(a.jsxs)("div",{className:"mt-5",children:[Object(a.jsx)("h3",{children:"Temperature measurements over time"}),Object(a.jsx)("small",{children:"Select only one station and depth for meaningful results!"}),Object(a.jsx)("div",{id:r})]})};R.defaultProps={width:700,height:500};var H=r(283),_=r(284),V=r(114),J=r(115);var W=function(){function t(e,r,a){Object(V.a)(this,t),this.attribute=e,this.comparator=r,this.threshold=a,"TimeStamp"==e&&(this.threshold=z()(a).toDate())}return Object(J.a)(t,[{key:"toString",value:function(){return"TimeStamp"==this.attribute?this.attribute+" "+this.comparator+" "+this.threshold.toLocaleDateString("de-DE"):this.attribute+" "+this.comparator+" "+this.threshold.toString()}},{key:"filter",value:function(t){var e=this;switch(this.comparator){case"=":case"==":return"TimeStamp"==this.attribute?t.filter((function(t){return r=t[e.attribute],a=e.threshold,r.getFullYear()===a.getFullYear()&&r.getMonth()===a.getMonth()&&r.getDate()===a.getDate();var r,a})):t.filter((function(t){return t[e.attribute]==e.threshold}));case"<":return t.filter((function(t){return t[e.attribute]<e.threshold}));case"<=":return t.filter((function(t){return t[e.attribute]<=e.threshold}));case">":return t.filter((function(t){return t[e.attribute]>e.threshold}));case">=":return t.filter((function(t){return t[e.attribute]>=e.threshold}))}}}]),t}(),Y=r(285),q=r(286),K=r(111),Q=function(t){var e=Object(n.useRef)(null),r=Object(n.useRef)(null),c=Object(n.useRef)(null);return Object(a.jsxs)("div",{className:"control-panel",children:[Object(a.jsxs)(H.a,{children:[Object(a.jsxs)(_.a,{xs:"12",children:[Object(a.jsx)("strong",{children:"Filters"}),Object(a.jsx)("small",{children:" (click to remove)"})]}),Object(a.jsx)(_.a,{xs:"12",children:t.filters.map((function(e){return Object(a.jsx)(Y.a,{className:"m-1",color:"success",onClick:function(){return r=e,void t.removeFilter(r);var r},children:e.toString()})}))})]}),Object(a.jsx)(H.a,{children:Object(a.jsx)(_.a,{className:"pl-3",children:Object(a.jsxs)("small",{children:[t.matchCount," rows match filters."]})})}),Object(a.jsx)("hr",{}),Object(a.jsx)(H.a,{children:Object(a.jsx)(_.a,{xs:"12",children:Object(a.jsx)("strong",{children:"Add Filter"})})}),Object(a.jsxs)(H.a,{className:"mt-1",children:[Object(a.jsx)(_.a,{xs:"3",children:"Attribute"}),Object(a.jsx)(_.a,{xs:"9",children:Object(a.jsx)(q.a,{innerRef:e,type:"select",children:t.attributes.map((function(t){return Object(a.jsx)("option",{value:t,children:t})}))})})]}),Object(a.jsxs)(H.a,{className:"mt-1",children:[Object(a.jsx)(_.a,{xs:"3",children:"Comparator"}),Object(a.jsx)(_.a,{xs:"9",children:Object(a.jsx)(q.a,{innerRef:r,type:"select",children:["==","<","<=",">",">="].map((function(t){return Object(a.jsx)("option",{value:t,children:t})}))})})]}),Object(a.jsxs)(H.a,{className:"mt-1 mb-2",children:[Object(a.jsx)(_.a,{xs:"3",children:"Threshold"}),Object(a.jsx)(_.a,{xs:"9",children:Object(a.jsx)(q.a,{innerRef:c,type:"text",placeholder:"[for dates use: yyyy-mm-dd]"})})]}),Object(a.jsx)(H.a,{children:Object(a.jsx)(_.a,{xs:"12",children:Object(a.jsx)(K.a,{block:!0,onClick:function(){var a=e.current.value,n=r.current.value,i=c.current.value;if(0!=i.length){var s=new W(a,n,i);t.addFilter(s)}},children:"Add Filter"})})})]})},U=function(t){var e=Object(n.useState)([]),r=Object(u.a)(e,2),c=r[0],i=r[1],s=function(){var e,r=t.data,a=Object(G.a)(c);try{for(a.s();!(e=a.n()).done;){r=e.value.filter(r)}}catch(n){a.e(n)}finally{a.f()}return r};return Object(a.jsxs)(H.a,{children:[Object(a.jsxs)(_.a,{xs:"8",className:"visualization-panel",children:[Object(a.jsx)(P,{data:s()}),Object(a.jsx)(R,{data:s()})]}),Object(a.jsx)(_.a,{xs:"4",className:"control-panel",children:Object(a.jsx)(Q,{filters:c,addFilter:function(t){i([].concat(Object(L.a)(c),[t]))},removeFilter:function(t){i(c.filter((function(e){return t!=e})))},matchCount:s().length,attributes:t.attributes})})]})},X=function(t){var e=Object(n.useState)(p()),r=Object(u.a)(e,1)[0],c=Object(n.useState)([]),i=Object(u.a)(c,2),s=i[0],o=i[1],l=Object(n.useState)(null),d=Object(u.a)(l,2),j=(d[0],d[1],Object(n.useState)([])),h=Object(u.a)(j,2),b=h[0],f=h[1];return Object(n.useEffect)((function(){v.a.parse("infovis2/img_coords.csv",{download:!0,header:!0,dynamicTyping:!0,complete:function(t,e){o(t.data)}})}),[]),Object(n.useEffect)((function(){document.getElementById(r).innerHTML="";var e=function(t,e){var r,a=t.reduce((function(t,e){return t.set(e["Station.Number"],[].concat(Object(L.a)(t.get(e["Station.Number"])||[]),[e]))}),new Map),n=[],c=Object(G.a)(a.keys());try{var i=function(){var t=r.value,c=a.get(t),i=(c.reduce((function(t,e){return t+e.Temperature}),0)/c.length).toFixed(1)+" \xb0C",s=(c.reduce((function(t,e){return t+e["Measured.Extinction.Coefficient"]}),0)/c.length).toFixed(3),o=(c.reduce((function(t,e){return t+e["Optical.Backscatter"]}),0)/c.length).toFixed(3),l=(c.reduce((function(t,e){return t+e.Salinity}),0)/c.length).toFixed(3),u=c.map((function(t){return t.Depth})).reduce((function(t,e){return t>e?t:e}),0)+"m",d=void 0,j=e.filter((function(e){return e.station===t}));d=j.length>0?j[0]:{x:-10,y:-10};var h={"Station.Number":t,x:d.x,y:d.y,Temperature:i,"Measured.Extinction.Coefficient":s,"Optical.Backscatter":o,Salinity:l,MaximumDepth:u},b=function(t){return!(t.Temperature<14)&&!(t.Salinity>28)&&!(t["Optical.Backscatter"]>6)}(h);h["Good.DivingSpot"]=b,n.push(h)};for(c.s();!(r=c.n()).done;)i()}catch(s){c.e(s)}finally{c.f()}return n.sort((function(t,e){return t["Station.Number"]>e["Station.Number"]?1:-1})),f(n),n}(t.data,s);console.log("Data",e);var a,n=O.j("#".concat(r)).append("svg").attr("width",730).attr("height",1053),c=Object(G.a)(e);try{var i=function(){var e=a.value;(o=document.createElement("area")).setAttribute("shape","circle"),o.setAttribute("title","Station "+e["Station.Number"]),l=e.x+","+e.y+",10",o.setAttribute("coords",l),o.setAttribute("href",'javascript:showStation("'+e["Station.Number"]+'");'),n.append("circle").attr("id","station-"+e["Station.Number"]).attr("class","station-circle").attr("cx",e.x).attr("cy",e.y).attr("r","5").on("click",(function(){return function(e){var r=b.filter((function(t){return t["Station.Number"]==e}));if(0!=r.length){var a=r[0];delete a.x,delete a.y,t.notify(r[0])}}(e["Station.Number"])})).attr("fill",e["Good.DivingSpot"]?"green":"red")};for(c.s();!(a=c.n()).done;){var o,l;i()}}catch(u){c.e(u)}finally{c.f()}}),[t.data,s]),Object(a.jsxs)("div",{children:[Object(a.jsx)("h3",{children:"Diving Spot Guide"}),Object(a.jsx)("small",{children:"Based on the values obtained by clicking the measurement point, diving spots are either categorized as good or bad. Good spots are green, bad spots are red!"}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),Object(a.jsx)("div",{id:r,style:{background:"url(/infovis2/bay.jpeg)"}})]})},Z=function(t){var e=Object(n.useState)([]),r=Object(u.a)(e,2),c=r[0],i=r[1],s=function(){var e,r=t.data,a=Object(G.a)(c);try{for(a.s();!(e=a.n()).done;){r=e.value.filter(r)}}catch(n){a.e(n)}finally{a.f()}return r},o=Object(n.useState)({}),l=Object(u.a)(o,2),d=l[0],j=l[1];return Object(a.jsxs)(H.a,{children:[Object(a.jsx)(_.a,{xs:"8",className:"visualization-panel",children:Object(a.jsx)(X,{data:s(),notify:function(t){return j(t)}})}),Object(a.jsxs)(_.a,{xs:"4",className:"control-panel",children:[Object(a.jsx)(Q,{filters:c,addFilter:function(t){i([].concat(Object(L.a)(c),[t]))},removeFilter:function(t){i(c.filter((function(e){return t!=e})))},matchCount:s().length,attributes:t.attributes}),Object(a.jsxs)("div",{children:[Object(a.jsx)("hr",{}),Object(a.jsx)("h4",{children:"Average measures for last selection"}),Object(a.jsxs)("table",{children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{children:"Measure"}),Object(a.jsx)("th",{children:"Value"})]})}),Object(a.jsx)("tbody",{children:Object.keys(d).map((function(t){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:t}),Object(a.jsx)("td",{children:d[t].toString()})]})}))})]})]})]})]})},$=function(){var t=Object(n.useState)([]),e=Object(u.a)(t,2),r=e[0],c=e[1],i=Object(n.useState)([]),s=Object(u.a)(i,2),o=s[0],j=s[1],h=Object(n.useState)(!0),b=Object(u.a)(h,2),O=b[0],m=b[1];return Object(n.useEffect)((function(){v.a.parse("infovis2/SFBay.csv",{download:!0,header:!0,dynamicTyping:!0,complete:function(t,e){var r=t.data.map((function(t){return Object(l.a)(Object(l.a)({},t),{},{TimeStamp:z()(t.TimeStamp).toDate()})}));r.pop(),c(r),j(Object.keys(r[0])),m(!1)}})}),[]),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(d.a,{exact:!0,path:"/",render:function(){return Object(a.jsx)(f,{data:r,loading:O})}}),Object(a.jsxs)(C,{children:[Object(a.jsx)(d.a,{exact:!0,path:"/welcome",render:function(){return Object(a.jsx)(B,{data:r})}}),Object(a.jsx)(d.a,{exact:!0,path:"/dt",render:function(){return Object(a.jsx)(U,{data:r,attributes:o})}}),Object(a.jsx)(d.a,{exact:!0,path:"/map",render:function(){return Object(a.jsx)(Z,{data:r,attributes:o})}})]})]})},tt=function(t){t&&t instanceof Function&&r.e(3).then(r.bind(null,290)).then((function(e){var r=e.getCLS,a=e.getFID,n=e.getFCP,c=e.getLCP,i=e.getTTFB;r(t),a(t),n(t),c(t),i(t)}))};r(271);s.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(o.a,{children:Object(a.jsx)($,{})})}),document.getElementById("root")),tt()}},[[272,1,2]]]);
//# sourceMappingURL=main.0ea48e32.chunk.js.map